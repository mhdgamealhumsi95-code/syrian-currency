<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø­ÙˆÙ„ Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©</title>
    
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@500;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #013430;
            --gold-color: #C5A065;
            --white-color: #FFFFFF;
            --input-bg: #F5F5F5;
            --btn-hover: #b08d55;
            --red-alert: #d63031;
            --green-success: #00b894;
        }

        body {
            background-color: var(--bg-color);
            font-family: 'Tajawal', sans-serif;
            margin: 0;
            padding: 20px 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .eagle-container { margin-bottom: 20px; text-align: center; }
        .eagle-icon { width: 100px; height: auto; fill: var(--gold-color); }

        h1 {
            color: var(--white-color);
            font-size: 1.8rem;
            font-weight: 800;
            margin: 0 0 20px 0;
            text-align: center;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ÙƒØ±ÙˆØª */
        .card {
            background-color: var(--white-color);
            width: 90%;
            max-width: 600px;
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .card-title {
            color: #998353;
            font-size: 1.2rem;
            font-weight: 800;
            margin-bottom: 20px;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙˆÙ„ */
        .input-group {
            margin-bottom: 20px;
            text-align: right;
        }
        
        .label-text {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
            display: block;
            font-weight: bold;
        }

        .flex-row {
            display: flex;
            gap: 10px;
        }

        input, select {
            padding: 15px;
            font-size: 1.1rem;
            border: 2px solid #ddd;
            border-radius: 15px;
            background-color: var(--input-bg);
            font-family: 'Tajawal', sans-serif;
            font-weight: bold;
            outline: none;
            transition: 0.3s;
            text-align: right;
        }

        input { flex: 2; border-color: var(--gold-color); }
        select { flex: 1; border-color: #ccc; cursor: pointer; }
        
        input:focus { box-shadow: 0 0 10px rgba(197, 160, 101, 0.3); }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø© ÙÙŠ Ø§Ù„Ø­Ø§Ø³Ø¨Ø© */
        .result-box {
            background-color: #f0fdf4;
            border: 2px dashed var(--green-success);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            display: none; /* Ù…Ø®ÙÙŠ Ø§ÙØªØ±Ø§Ø¶ÙŠØ§Ù‹ */
        }
        
        .result-text {
            font-size: 1.1rem;
            color: #333;
            margin: 5px 0;
        }
        
        .result-amount {
            font-size: 1.4rem;
            font-weight: 800;
            color: var(--green-success);
        }

        .error-box {
            background-color: #fff0f0;
            border: 2px solid var(--red-alert);
            color: var(--red-alert);
            padding: 10px;
            border-radius: 10px;
            margin-top: 10px;
            display: none;
            font-weight: bold;
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª */
        .actions-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .action-btn {
            background-color: var(--gold-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            font-family: 'Tajawal', sans-serif;
            cursor: pointer;
            text-decoration: none;
            font-size: 0.9rem;
        }
        
        .btn-green { background-color: #25D366; }
        .btn-dark { background-color: #333; display: none; }

        @media (max-width: 600px) {
            .flex-row { flex-direction: column; }
            select { width: 100%; }
        }
    </style>
</head>
<body>

    <div class="eagle-container">
       <img src="logo.png" class="eagle-icon" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù†Ø³Ø±">
    </div>

    <h1>ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</h1>

    <div class="card">
        <div class="card-title">ğŸ”„ Ø§Ù„Ù…Ø­ÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹</div>
        
        <div class="input-group">
            <span class="label-text">Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº (ØªØªØ­ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹):</span>
            <div class="flex-row">
                <input type="number" id="oldAmount" placeholder="Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©" oninput="convertCurrency('old')">
                <input type="number" id="newAmount" placeholder="Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©" oninput="convertCurrency('new')">
            </div>
        </div>
        
        <div style="font-size: 0.8rem; color: #888; margin-top: 10px;">
            * Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©: 1 Ù„ÙŠØ±Ø© Ø¬Ø¯ÙŠØ¯Ø© = 100 Ù„ÙŠØ±Ø© Ù‚Ø¯ÙŠÙ…Ø©
        </div>
    </div>

    <div class="card" style="border-top: 5px solid var(--gold-color);">
        <div class="card-title">ğŸ§® Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¨Ø§Ù‚ÙŠ (ØªØµØ­ÙŠØ­ Ø§Ù„Ø­Ø³Ø¨Ø©)</div>
        
        <div class="input-group">
            <span class="label-text">1. ÙƒÙ… Ø³Ø¹Ø± Ø§Ù„ØºØ±Ø¶ØŸ</span>
            <div class="flex-row">
                <input type="number" id="itemPrice" placeholder="Ù…Ø«Ù„Ø§Ù‹: 8000" oninput="calculateChange()">
                <select id="priceCurrency" onchange="calculateChange()">
                    <option value="old">Ù„ÙŠØ±Ø© Ù‚Ø¯ÙŠÙ…Ø©</option>
                    <option value="new">Ù„ÙŠØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©</option>
                </select>
            </div>
        </div>

        <div class="input-group">
            <span class="label-text">2. ÙƒÙ… Ø¯ÙØ¹Øª Ù„Ù„Ø¨Ø§Ø¦Ø¹ØŸ</span>
            <div class="flex-row">
                <input type="number" id="paidAmount" placeholder="Ù…Ø«Ù„Ø§Ù‹: 100" oninput="calculateChange()">
                <select id="paidCurrency" onchange="calculateChange()">
                    <option value="new">Ù„ÙŠØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©</option>
                    <option value="old">Ù„ÙŠØ±Ø© Ù‚Ø¯ÙŠÙ…Ø©</option>
                </select>
            </div>
        </div>

        <div id="resultBox" class="result-box">
            <div class="result-text">Ø§Ù„Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø°ÙŠ ÙŠØ¬Ø¨ Ø§Ø³ØªÙ„Ø§Ù…Ù‡:</div>
            <div class="result-amount" id="changeNew">0 Ù„.Ø³ Ø¬Ø¯ÙŠØ¯Ø©</div>
            <div style="font-size: 0.9rem; color:#666;">Ø£Ùˆ Ù…Ø§ ÙŠØ¹Ø§Ø¯Ù„Ù‡Ø§:</div>
            <div class="result-amount" style="color: #013430;" id="changeOld">0 Ù„.Ø³ Ù‚Ø¯ÙŠÙ…Ø©</div>
        </div>

        <div id="errorBox" class="error-box">
            Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹ Ø£Ù‚Ù„ Ù…Ù† Ø³Ø¹Ø± Ø§Ù„ØºØ±Ø¶!
        </div>
    </div>

    <div class="actions-container">
        <button class="action-btn btn-green" onclick="shareApp()">Ù†Ø´Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ğŸ“¢</button>
        <button id="installBtn" class="action-btn btn-dark">ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ğŸ“²</button>
    </div>

    <div style="text-align: center; margin-top: 30px; color: rgba(255,255,255,0.6); font-size: 0.8rem;">
        ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© [Mohamad Alhumsi]
    </div>

    <script>
        // --- 1. ÙƒÙˆØ¯ Ø§Ù„Ù…Ø­ÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ ---
        function convertCurrency(source) {
            const oldInput = document.getElementById('oldAmount');
            const newInput = document.getElementById('newAmount');
            
            if (source === 'old') {
                let val = parseFloat(oldInput.value);
                newInput.value = !isNaN(val) ? parseFloat((val / 100).toFixed(2)) : '';
            } else {
                let val = parseFloat(newInput.value);
                oldInput.value = !isNaN(val) ? Math.round(val * 100) : '';
            }
        }

        // --- 2. ÙƒÙˆØ¯ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¨Ø§Ù‚ÙŠ (Ø§Ù„Ø¬Ø¯ÙŠØ¯) ---
        function calculateChange() {
            // Ø¬Ù„Ø¨ Ø§Ù„Ù‚ÙŠÙ…
            let price = parseFloat(document.getElementById('itemPrice').value);
            let priceType = document.getElementById('priceCurrency').value;
            
            let paid = parseFloat(document.getElementById('paidAmount').value);
            let paidType = document.getElementById('paidCurrency').value;

            const resultBox = document.getElementById('resultBox');
            const errorBox = document.getElementById('errorBox');

            // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ù…Ø¯Ø®Ù„Ø©
            if (isNaN(price) || isNaN(paid)) {
                resultBox.style.display = 'none';
                errorBox.style.display = 'none';
                return;
            }

            // ØªÙˆØ­ÙŠØ¯ Ø§Ù„Ø¹Ù…Ù„Ø© Ù„Ù„Ø­Ø³Ø§Ø¨ (ØªØ­ÙˆÙŠÙ„ Ø§Ù„ÙƒÙ„ Ù„Ù„Ù‚Ø¯ÙŠÙ… Ù„Ù„Ø­Ø³Ø§Ø¨)
            let priceInOld = (priceType === 'new') ? price * 100 : price;
            let paidInOld = (paidType === 'new') ? paid * 100 : paid;

            let changeInOld = paidInOld - priceInOld;

            if (changeInOld < 0) {
                // Ø§Ù„Ù…Ø¨Ù„Øº Ù†Ø§Ù‚Øµ
                resultBox.style.display = 'none';
                errorBox.style.display = 'block';
                errorBox.innerText = "Ø§Ù†ØªØ¨Ù‡: Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹ ØºÙŠØ± ÙƒØ§ÙÙ! (Ù†Ø§Ù‚Øµ " + Math.abs(changeInOld) + " Ù‚Ø¯ÙŠÙ…Ø©)";
            } else {
                // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
                errorBox.style.display = 'none';
                resultBox.style.display = 'block';
                
                let changeInNew = changeInOld / 100;

                document.getElementById('changeNew').innerText = changeInNew.toLocaleString() + " Ù„.Ø³ (Ø¬Ø¯ÙŠØ¯Ø©)";
                document.getElementById('changeOld').innerText = changeInOld.toLocaleString() + " Ù„.Ø³ (Ù‚Ø¯ÙŠÙ…Ø©)";
            }
        }

        // --- 3. Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù†Ø´Ø± ÙˆØ§Ù„ØªØ«Ø¨ÙŠØª ---
        function shareApp() {
            if (navigator.share) {
                navigator.share({
                    title: 'Ù…Ø­ÙˆÙ„ Ø§Ù„Ù„ÙŠØ±Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©',
                    text: 'ØªØ·Ø¨ÙŠÙ‚ Ø±Ø§Ø¦Ø¹ Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¹Ù…Ù„Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ÙˆÙƒØ´Ù Ø§Ù„Ø¨Ø§Ù‚ÙŠ Ø¨Ø¯Ù‚Ø©!',
                    url: window.location.href
                });
            } else {
                alert('Ø§Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø· ÙˆØ´Ø§Ø±ÙƒÙ‡ ÙŠØ¯ÙˆÙŠØ§Ù‹: ' + window.location.href);
            }
        }

        // ÙƒÙˆØ¯ Ø§Ù„ØªØ«Ø¨ÙŠØª PWA
        let deferredPrompt;
        const installBtn = document.getElementById('installBtn');
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.style.display = 'block';
        });
        installBtn.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') installBtn.style.display = 'none';
                deferredPrompt = null;
            }
        });

        // ØªØ´ØºÙŠÙ„ Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js');
            });
        }
    </script>
</body>
</html>


